{"ast":null,"code":"import _regeneratorRuntime from\"D:/js/closedloan/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/js/closedloan/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"D:/js/closedloan/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _defineProperty from\"D:/js/closedloan/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _toConsumableArray from\"D:/js/closedloan/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"D:/js/closedloan/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";var DataContext=/*#__PURE__*/React.createContext({acceptData:function acceptData(column,row,value){},savedData:[],colorHandler:function colorHandler(){},conditionalRowStyles:[],sendRequestHandler:function sendRequestHandler(){},searcheButtonHandler:function searcheButtonHandler(a,b){},disableButtonChecker:function disableButtonChecker(){},countButtonHandler:function countButtonHandler(){},cChangedData:[],countSecView:false,countSecViewHandler:function countSecViewHandler(){},disableButton:false});export default DataContext;export var DataContextProvider=function DataContextProvider(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),savedData=_useState2[0],setSavedData=_useState2[1];// {LoanId , Status,packN,boxN,...}  data for send\nvar _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),cChangedData=_useState4[0],setCChangedData=_useState4[1];// get count of changed Status which not equal ' '\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),countSecView=_useState6[0],setCountSecView=_useState6[1];// view button section view or hide\nvar _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),disableButton=_useState8[0],setDisableButton=_useState8[1];var acceptHandlerF=function acceptHandlerF(column,row,value){var existinItem=savedData.find(function(item){return item.LoanId===row.LoanId;});if(!existinItem){setSavedData(function(prevState){return[].concat(_toConsumableArray(prevState),[Object.assign(_defineProperty({LoanId:row.LoanId},column,column=value))]);});}else{existinItem.LoanId=row.LoanId;existinItem[column]=value;}colorHandler(row,false);};//accept color\nvar colorHandler=function colorHandler(row,action){console.log(savedData);var updatedData=savedData.map(function(item){if(row.LoanId!==item.LoanId){return item;}else if(action){return _objectSpread(_objectSpread({},item),{},{toggleSelected:!item.toggleSelected});}else{return _objectSpread(_objectSpread({},item),{},{toggleSelected:false});}});setSavedData(updatedData);};var disableButtonChecker=function disableButtonChecker(){var counter=savedData.filter(function(el){return el.toggleSelected===true;});counter.length>1||counter.length===0?setDisableButton(true):setDisableButton(false);};// changed status counter view\nvar countSecViewHandler=function countSecViewHandler(e){e.preventDefault();setCountSecView(!countSecView);};var countChanged=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,countData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:5000/count\");case 2:response=_context.sent;_context.next=5;return response.json();case 5:countData=_context.sent;setCChangedData(countData[0]);case 7:case\"end\":return _context.stop();}},_callee);}));return function countChanged(){return _ref.apply(this,arguments);};}();var searcheNewdata=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(personalNo,agreementNo){var response,newData;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:console.log(personalNo,agreementNo);_context2.next=3;return fetch(\"http://localhost:5000/api?personalNo=\".concat(personalNo,\"&agreementNo=\").concat(agreementNo));case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:newData=_context2.sent;setSavedData(newData[0]);case 8:case\"end\":return _context2.stop();}},_callee2);}));return function searcheNewdata(_x,_x2){return _ref2.apply(this,arguments);};}();var submitHandler=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var newData;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch('http://localhost:5000/update',{method:'POST',headers:{'Content-Type':'application/json','Accept':'application/json'},body:JSON.stringify({savedData:savedData})}).then(function(res){return res.json();});case 2:newData=_context3.sent;console.log(newData);case 4:case\"end\":return _context3.stop();}},_callee3);}));return function submitHandler(){return _ref3.apply(this,arguments);};}();var conditionalRowStyles=[{when:function when(row){return row.toggleSelected;},style:{backgroundColor:\"#e8fed5\",userSelect:\"none\"}}];return/*#__PURE__*/_jsx(DataContext.Provider,{value:{acceptData:acceptHandlerF,savedData:savedData,colorHandler:colorHandler,conditionalRowStyles:conditionalRowStyles,sendRequestHandler:submitHandler,searcheButtonHandler:searcheNewdata,disableButtonChecker:disableButtonChecker,countButtonHandler:countChanged,cChangedData:cChangedData,countSecView:countSecView,countSecViewHandler:countSecViewHandler,disableButton:disableButton},children:props.children});};","map":{"version":3,"names":["React","useState","jsx","_jsx","DataContext","createContext","acceptData","column","row","value","savedData","colorHandler","conditionalRowStyles","sendRequestHandler","searcheButtonHandler","a","b","disableButtonChecker","countButtonHandler","cChangedData","countSecView","countSecViewHandler","disableButton","DataContextProvider","props","_useState","_useState2","_slicedToArray","setSavedData","_useState3","_useState4","setCChangedData","_useState5","_useState6","setCountSecView","_useState7","_useState8","setDisableButton","acceptHandlerF","existinItem","find","item","LoanId","prevState","concat","_toConsumableArray","Object","assign","_defineProperty","action","console","log","updatedData","map","_objectSpread","toggleSelected","counter","filter","el","length","e","preventDefault","countChanged","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","countData","wrap","_callee$","_context","prev","next","fetch","sent","json","stop","apply","arguments","searcheNewdata","_ref2","_callee2","personalNo","agreementNo","newData","_callee2$","_context2","_x","_x2","submitHandler","_ref3","_callee3","_callee3$","_context3","method","headers","body","JSON","stringify","then","res","when","style","backgroundColor","userSelect","Provider","children"],"sources":["D:/js/closedloan/src/context/data-context.js"],"sourcesContent":["import React from 'react'\r\nimport { useState } from 'react'\r\n\r\n\r\nconst DataContext =React.createContext ({\r\n  acceptData:(column,row,value)=>{},\r\n  savedData:[],\r\n  colorHandler:()=>{},\r\n  conditionalRowStyles:[],\r\n  sendRequestHandler:()=>{},\r\n  searcheButtonHandler:(a,b)=>{},\r\n  disableButtonChecker:()=>{},\r\n  countButtonHandler:()=>{},\r\n  cChangedData:[],\r\n  countSecView:false,\r\n  countSecViewHandler:()=>{},\r\n  disableButton:false\r\n})\r\n\r\nexport default DataContext\r\n\r\n\r\nexport const DataContextProvider=(props)=>{\r\n    const [savedData,setSavedData]=useState([])  // {LoanId , Status,packN,boxN,...}  data for send\r\n    const [cChangedData,setCChangedData]=useState([]) // get count of changed Status which not equal ' '\r\n    const [countSecView,setCountSecView]=useState(false)// view button section view or hide\r\n    const [disableButton,setDisableButton]=useState(false) \r\n   \r\n    \r\n  const acceptHandlerF =(column, row, value)=>{ \r\n    \r\n    const existinItem=savedData.find(item=>{return item.LoanId===row.LoanId})\r\n    if (!existinItem){\r\n      setSavedData((prevState)=>([...prevState,Object.assign({LoanId:row.LoanId, [column]:column=value})]));\r\n       } \r\n       else { \r\n                existinItem.LoanId=row.LoanId;\r\n                existinItem[column]=value\r\n            }\r\n    colorHandler(row,false)          \r\n    \r\n  }\r\n  \r\n//accept color\r\n\r\nconst colorHandler=(row,action)=>{\r\n     console.log(savedData);\r\n     \r\n    const updatedData = savedData.map(item => {\r\n      if (row.LoanId !== item.LoanId) {\r\n        return item;\r\n      } else \r\n    \r\n      if(action) {\r\n        return {...item,\r\n          toggleSelected: !item.toggleSelected\r\n        }\r\n      }\r\n      else {\r\n        return {...item,\r\n        toggleSelected: false\r\n      }\r\n      }\r\n    });\r\n    setSavedData(updatedData)\r\n  }\r\n\r\n  const disableButtonChecker=()=>{\r\n    const counter=savedData.filter(el=>el.toggleSelected===true)\r\n    counter.length>1||counter.length===0?setDisableButton(true):setDisableButton(false)\r\n  }\r\n\r\n  // changed status counter view\r\n  const countSecViewHandler=(e)=>{\r\n    e.preventDefault()    \r\n    setCountSecView(!countSecView)\r\n  }\r\n\r\n  const countChanged=async ()=>{        \r\n    const response = await fetch(`http://localhost:5000/count`);\r\n    const countData=await response.json();\r\n   setCChangedData(countData[0])\r\n  }\r\n\r\n  const searcheNewdata= async (personalNo,agreementNo)=>{        \r\n    console.log(personalNo,agreementNo);\r\n    const response = await fetch(`http://localhost:5000/api?personalNo=${personalNo}&agreementNo=${agreementNo}`);\r\n    const newData=await response.json();\r\n    setSavedData(newData[0]) \r\n  }\r\n\r\n  const submitHandler=async()=>{\r\n    const newData=await fetch('http://localhost:5000/update',{\r\n      method:'POST',\r\n      headers:{\r\n        'Content-Type':'application/json',\r\n        'Accept':'application/json'\r\n      },\r\n      body:JSON.stringify(\r\n        {savedData}\r\n      )\r\n    }).then(res=>res.json())\r\n     console.log(newData);           \r\n}\r\n\r\n  const conditionalRowStyles = [\r\n    {\r\n      when: row => row.toggleSelected,\r\n      style: {\r\n        backgroundColor: \"#e8fed5\",\r\n        userSelect: \"none\"\r\n      }\r\n    }];\r\n\r\n    return <DataContext.Provider value={{\r\n        acceptData:acceptHandlerF,\r\n        savedData:savedData,\r\n        colorHandler:colorHandler,\r\n        conditionalRowStyles:conditionalRowStyles,\r\n        sendRequestHandler:submitHandler,\r\n        searcheButtonHandler:searcheNewdata,\r\n        disableButtonChecker:disableButtonChecker,\r\n        countButtonHandler:countChanged,\r\n        cChangedData:cChangedData,\r\n        countSecView:countSecView,\r\n        countSecViewHandler:countSecViewHandler,\r\n        disableButton:disableButton\r\n        \r\n    }} >\r\n        {props.children}\r\n    </DataContext.Provider>    \r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}